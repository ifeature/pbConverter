{"version":3,"sources":["Service.js"],"names":[],"mappings":"AAAA;;;;;;AAEA,OAAO,CAAC,eAAD,CAAP,EAA0B,UAAU,IAAV,EAAgB;AACxC,MAAI,iBAAJ,CADwC;;AAGxC,WAAS,GAAT,CAAa,GAAb,EAAkB;AAChB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,IAAV,EAAmB;AACpC,UAAM,MAAM,IAAI,cAAJ,EAAN,CAD8B;AAEpC,UAAI,IAAJ,CAAS,KAAT,EAAgB,GAAhB,EAAqB,IAArB,EAFoC;AAGpC,UAAI,gBAAJ,CAAqB,MAArB,EAA6B,YAAM;AACjC,YAAI,IAAI,MAAJ,GAAa,GAAb,EAAkB;AACpB,kBAAQ,IAAI,YAAJ,CAAR,CADoB;SAAtB,MAEO;AACL,eAAK,IAAI,KAAJ,CAAU,UAAV,EAAsB,IAAI,UAAJ,CAA3B,EADK;SAFP;OAD2B,CAA7B,CAHoC;AAUpC,UAAI,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AAClC,aAAK,IAAI,KAAJ,CAAU,8BAAV,CAAL,EADkC;OAAN,CAA9B,CAVoC;AAapC,UAAI,IAAJ,CAAS,IAAT,EAboC;KAAnB,CAAnB,CADgB;GAAlB;;;;;AAHwC;MAwBlC;AACJ,aADI,OACJ,GAAc;4BADV,SACU;;AACZ,UAAI,CAAC,QAAD,EAAW;AACb,mBAAW,IAAX,CADa;AAEb,eAAO,QAAP,CAFa;OAAf;AAIA,aAAO,QAAP,CALY;KAAd;;iBADI;;8BASI,KAAK,UAAU;AACrB,YAAI,GAAJ,EAAS,IAAT,CAAc,KAAK,KAAL,CAAd,CAA0B,IAA1B,CAA+B,QAA/B,EAAyC,UAAC,KAAD,EAAW;AAClD,cAAM,WAAW,IAAI,KAAK,QAAL,CAAc,CAAC,KAAD,CAAlB,CAAX,CAD4C;AAElD,mBAAS,MAAT,GAFkD;AAGlD,eAAK,QAAL,CAAc,IAAd,GAHkD;SAAX,CAAzC,CADqB;;;;WATnB;MAxBkC;;AA0CxC,SAAO,OAAP,CA1CwC;CAAhB,CAA1B","file":"Service-compiled.js","sourcesContent":["'use strict';\n\ndefine(['View-compiled'], function (View) {\n  let instance;\n\n  function get(url) {\n    return new Promise((succeed, fail) => {\n      const req = new XMLHttpRequest();\n      req.open('GET', url, true);\n      req.addEventListener('load', () => {\n        if (req.status < 400) {\n          succeed(req.responseText);\n        } else {\n          fail(new Error('Неудачно', req.statusText));\n        }\n      });\n      req.addEventListener('error', () => {\n        fail(new Error('Ошибка подключения к серверу'));\n      });\n      req.send(null);\n    });\n  }\n\n  /**\n   * класс Service, который получает данные с сервера\n   */\n  class Service {\n    constructor() {\n      if (!instance) {\n        instance = this;\n        return instance;\n      }\n      return instance;\n    }\n\n    getJSON(url, callback) {\n      get(url).then(JSON.parse).then(callback, (error) => {\n        const errorBox = new View.ErrorBox([error]);\n        errorBox.render();\n        View.ErrorBox.show();\n      });\n    }\n  }\n\n  return Service;\n});\n"]}